// import "./styles.css";

const myBooks = `[{"Book Id":22456205,"Title":"Digital Signal Processing: Principles, Algorithms and Applications","Author":"John G. Proakis","Author l-f":"Proakis, John G.","Additional Authors":"Dimitris G. Manolakis","ISBN":"=\\"8131710009","ISBN13":"=\\"9788131710005","My Rating":0,"Average Rating":3.91,"Publisher":"Pearson Education","Binding":"Paperback","Number of Pages":1156,"Year Published":2007,"Original Publication Year":1992,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#49), giveaway (#20)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":34638362,"Title":"React Design Patterns and Best Practices","Author":"Michele Bertoli","Author l-f":"Bertoli, Michele","Additional Authors":"","ISBN":"=\\"1786464535","ISBN13":"=\\"9781786464538","My Rating":0,"Average Rating":4.08,"Publisher":"Packt Publishing","Binding":"Paperback","Number of Pages":"","Year Published":2017,"Original Publication Year":"","Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#47), giveaway (#18)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":9686347,"Title":"Quantitative Aptitude","Author":"R.S. Aggarwal","Author l-f":"Aggarwal, R.S.","Additional Authors":"","ISBN":"=\\"8121924987","ISBN13":"=\\"9788121924986","My Rating":0,"Average Rating":3.97,"Publisher":"","Binding":"Paperback","Number of Pages":726,"Year Published":2010,"Original Publication Year":2010,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#48), giveaway (#19)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":25737613,"Title":"Machine Learning for Big Data: Hands-on for Developers and Technical Professionals","Author":"Jason Bell","Author l-f":"Bell, Jason","Additional Authors":"","ISBN":"=\\"8126553375","ISBN13":"=\\"","My Rating":0,"Average Rating":3.36,"Publisher":"Wiley India Private Limited","Binding":"Paperback","Number of Pages":404,"Year Published":2014,"Original Publication Year":2014,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#46), giveaway (#17)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":34638337,"Title":"React Native Cookbook","Author":"Stan Bershadskiy","Author l-f":"Bershadskiy, Stan","Additional Authors":"Crysfel Villa","ISBN":"=\\"1786462559","ISBN13":"=\\"9781786462558","My Rating":0,"Average Rating":4,"Publisher":"Packt Publishing","Binding":"Paperback","Number of Pages":"","Year Published":2016,"Original Publication Year":"","Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#44), giveaway (#15)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":9052963,"Title":"Head First Design Patterns","Author":"Eric Freeman","Author l-f":"Freeman, Eric","Additional Authors":"Elisabeth Robson","ISBN":"=\\"8173664668","ISBN13":"=\\"9788173664663","My Rating":0,"Average Rating":4.29,"Publisher":"O'Reilly","Binding":"Paperback","Number of Pages":688,"Year Published":2004,"Original Publication Year":2004,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#45), giveaway (#16)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":36551625,"Title":"Building PHP Applications with Symfony, CakePHP and Zend Framework","Author":"Karol Przystalski, Leszek Nowak Bartosz Porebski","Author l-f":"Porebski, Karol Przystalski, Leszek Nowak Bartosz","Additional Authors":"","ISBN":"=\\"8126531053","ISBN13":"=\\"9788126531059","My Rating":0,"Average Rating":0,"Publisher":"Wiley","Binding":"Paperback","Number of Pages":576,"Year Published":2011,"Original Publication Year":"","Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#43), giveaway (#14)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":8218891,"Title":"Beginning ASP.NET 4: In C# and VB","Author":"Imar Spaanjaars","Author l-f":"Spaanjaars, Imar","Additional Authors":"","ISBN":"=\\"0470502215","ISBN13":"=\\"9780470502211","My Rating":0,"Average Rating":3.77,"Publisher":"Wrox Press","Binding":"Paperback","Number of Pages":803,"Year Published":2010,"Original Publication Year":2010,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#42), giveaway (#13)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":24940666,"Title":"Marissa Mayer and the Fight to Save Yahoo!","Author":"Nicholas Carlson","Author l-f":"Carlson, Nicholas","Additional Authors":"","ISBN":"=\\"1444789899","ISBN13":"=\\"9781444789898","My Rating":0,"Average Rating":3.91,"Publisher":"John Murray","Binding":"Paperback","Number of Pages":356,"Year Published":2015,"Original Publication Year":2015,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#40), giveaway (#11)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":3395317,"Title":"Professional ASP.NET Design Patterns","Author":"Scott Millett","Author l-f":"Millett, Scott","Additional Authors":"","ISBN":"=\\"0470292784","ISBN13":"=\\"9780470292785","My Rating":0,"Average Rating":4.12,"Publisher":"Wrox Press","Binding":"Paperback","Number of Pages":720,"Year Published":2010,"Original Publication Year":2008,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#41), giveaway (#12)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":58972828,"Title":"To Kill a Mockingbird (To Kill a Mockingbird, #1)","Author":"Harper Lee","Author l-f":"Lee, Harper","Additional Authors":"","ISBN":"=\\"0099549484","ISBN13":"=\\"9780099549482","My Rating":0,"Average Rating":4.27,"Publisher":"Arrow Books Ltd","Binding":"Paperback","Number of Pages":309,"Year Published":2010,"Original Publication Year":1960,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#39), giveaway (#10)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":50385725,"Title":"No Limits","Author":"Mukesh Bansal","Author l-f":"Bansal, Mukesh","Additional Authors":"","ISBN":"=\\"9389152232","ISBN13":"=\\"9789389152234","My Rating":0,"Average Rating":4.22,"Publisher":"Westland","Binding":"paperback","Number of Pages":382,"Year Published":2020,"Original Publication Year":"","Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#38), giveaway (#9)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":52376390,"Title":"How I Almost Blew It","Author":"Sidharth Rao","Author l-f":"Rao, Sidharth","Additional Authors":"","ISBN":"=\\"9388754379","ISBN13":"=\\"9789388754378","My Rating":0,"Average Rating":4.08,"Publisher":"Westland","Binding":"Hardcover","Number of Pages":350,"Year Published":2019,"Original Publication Year":"","Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#32), giveaway (#1)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":2522711,"Title":"Data Structure Through C","Author":"Yashavant P. Kanetkar","Author l-f":"Kanetkar, Yashavant P.","Additional Authors":"","ISBN":"=\\"817656706X","ISBN13":"=\\"9788176567060","My Rating":0,"Average Rating":4.03,"Publisher":"Bpb Publications","Binding":"Paperback","Number of Pages":616,"Year Published":2003,"Original Publication Year":2003,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#36), giveaway (#7)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":45022090,"Title":"Data Structures","Author":"Seymour Lipschutz","Author l-f":"Lipschutz, Seymour","Additional Authors":"","ISBN":"=\\"","ISBN13":"=\\"9780070601680","My Rating":0,"Average Rating":3.96,"Publisher":"McGraw-Hill","Binding":"Paperback","Number of Pages":"","Year Published":"","Original Publication Year":1986,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#37), giveaway (#8)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":11237057,"Title":"Head First Object Oriented Analysis & Design","Author":"Brett McLaughlin","Author l-f":"McLaughlin, Brett","Additional Authors":"","ISBN":"=\\"8184042213","ISBN13":"=\\"9788184042214","My Rating":0,"Average Rating":3.97,"Publisher":"O'Reilly Media","Binding":"Unknown Binding","Number of Pages":"","Year Published":2006,"Original Publication Year":2006,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#35), giveaway (#6)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":18492393,"Title":"Object-Oriented JavaScript","Author":"Nicholas C. Zakas","Author l-f":"Zakas, Nicholas C.","Additional Authors":"","ISBN":"=\\"1593275404","ISBN13":"=\\"9781593275402","My Rating":0,"Average Rating":4.35,"Publisher":"No Starch Press","Binding":"Paperback","Number of Pages":100,"Year Published":2014,"Original Publication Year":2012,"Date Read":"","Date Added":"2016/04/15","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#3), giveaway (#4)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":25724921,"Title":"Magical Book on Quicker Maths","Author":"Tyra","Author l-f":"Tyra, Tyra","Additional Authors":"","ISBN":"=\\"8190458922","ISBN13":"=\\"9788190458924","My Rating":0,"Average Rating":3.95,"Publisher":"Bsc Publishing","Binding":"Paperback","Number of Pages":807,"Year Published":2009,"Original Publication Year":2009,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#34), giveaway (#5)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":25609126,"Title":"Data Communications and Networking (McGraw-Hill Forouzan Networking)","Author":"Behrouz Forouzan","Author l-f":"Forouzan, Behrouz","Additional Authors":"","ISBN":"=\\"0070634149","ISBN13":"=\\"9780070634145","My Rating":0,"Average Rating":3.87,"Publisher":"TBS","Binding":"Paperback","Number of Pages":"","Year Published":2006,"Original Publication Year":2006,"Date Read":"","Date Added":"2022/06/11","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#33), giveaway (#3)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""},{"Book Id":19243347,"Title":"Cracking the PM Interview: How to Land a Product Manager Job in Technology","Author":"Gayle Laakmann McDowell","Author l-f":"McDowell, Gayle Laakmann","Additional Authors":"Jackie Bavaro","ISBN":"=\\"0984782818","ISBN13":"=\\"9780984782819","My Rating":0,"Average Rating":4.21,"Publisher":"CareerCup","Binding":"Paperback","Number of Pages":364,"Year Published":2013,"Original Publication Year":2013,"Date Read":"","Date Added":"2016/04/15","Bookshelves":"to-read, giveaway","Bookshelves with positions":"to-read (#1), giveaway (#2)","Exclusive Shelf":"to-read","My Review":"","Spoiler":"","Private Notes":"","Read Count":0,"Recommended For":"","Recommended By":"","Owned Copies":0,"Original Purchase Date":"","Original Purchase Location":"","Condition":"","Condition Description":"","BCID":""}]`;

let booksToDisplay = JSON.parse(myBooks);

document.getElementById("app").innerHTML = `
Please display books.
<br/>Show a button against a book to reserve it.
<br/>API: https://frontend.army/api/reserve-book/{bookID}
<br/>
<br/>Response will be either accepted or rejected basis some conditions.
<br/>(users can only have 1 book, no other user must have selected that same book, don't worry about how to determine, Backend will handle these cases).
`;

let bookDetail = document.querySelector("#book-detail");
let reserveBtn = document.querySelectorAll(".reserve-btn");

let renderBooks = booksToDisplay.map((book,ind) => {
    // console.log(book);
    // Author
    // Title
    // Button  -> Reserve
    // id --> https://www.goodreads.com/book/show/34638362

    return (
        `
        <tr>
            <th scope="row">${ind+1}</th>
            <td><a target="_blank" href="https://www.goodreads.com/book/show/${book["Book Id"]}">${book.Title}</a></td>
            <td>${book.Author}</td>
            <td><button type="button" class="btn btn-dark reserve-btn">Reserve</button></td>
        </tr>
        `
    )
});

let table = `
<table class="table">
    <thead>
        <tr>
        <th scope="col">S.No.</th>
        <th scope="col">Book Name</th>
        <th scope="col">Author</th>
        <th scope="col">Action</th>
        </tr>
    </thead>
    <tbody>
    ${renderBooks}
    </tbody>
</table>`;

bookDetail.innerHTML = table;
reserveBtn = document.querySelectorAll(".reserve-btn");

reserveBtn && reserveBtn.length && reserveBtn.forEach((item, ind) => {
    item.addEventListener("click", function reserveBtnClick () {
        fetch(`https://frontend.army/api/reserve-book/${booksToDisplay[ind]["Book Id"]}`)
        .then (resp => resp.data)
        .catch(err => console.log(err));
    });
});